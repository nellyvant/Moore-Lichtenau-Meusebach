select(
DateTime,
Temp_sonne_C = Temperature.....C.,
Licht_lux  = Light....lux.
)
th_clean <- df_th %>%
select(
DateTime,
Temp_schatten_C = Temperature.....C.,
relLF_percent         = RH......,
Taupunkt_C      = Dew.Point.....C.
)
# join
full_join(lt_clean, th_clean, by = "DateTime") %>%
mutate(
Standort  = standort,
Logger    = logger,
Logger_ID = paste0(standort, logger)
)
}
#Lichtenau Mitte
LM <- join_loggers(
df_lt    = LM_lt,
df_th    = LM_th,
standort = "L",
logger   = "M"
)
#Lichtenau Ost
LO <- join_loggers(
df_lt    = LO_lt,
df_th    = LO_th,
standort = "L",
logger   = "O"
)
#Lichtenau West
LW <- join_loggers(
df_lt    = LW_lt,
df_th    = LW_th,
standort = "L",
logger   = "W"
)
#Lichtenau Nord
LN <- join_loggers(
df_lt    = LN_lt,
df_th    = LN_th,
standort = "L",
logger   = "N"
)
#Lichtenau Süd
LS <- join_loggers(
df_lt    = LS_lt,
df_th    = LS_th,
standort = "L",
logger   = "S"
)
#Meusebach trocken Mitte
MTM <- join_loggers(
df_lt    = MTM_lt,
df_th    = MTM_th,
standort = "MT",
logger   = "M"
)
#Meusebach trocken Ost
MTO <- join_loggers(
df_lt    = MTO_lt,
df_th    = MTO_th,
standort = "MT",
logger   = "O"
)
#Meusebach trocken West
MTW <- join_loggers(
df_lt    = MTW_lt,
df_th    = MTW_th,
standort = "MT",
logger   = "W"
)
#Meusebach trocken Nord
MTN <- join_loggers(
df_lt    = MTN_lt,
df_th    = MTN_th,
standort = "MT",
logger   = "N"
)
#Meusebach trocken Süd
MTS <- join_loggers(
df_lt    = MTS_lt,
df_th    = MTS_th,
standort = "MT",
logger   = "S"
)
#Meusebach nass Mitte
MNM <- join_loggers(
df_lt    = MNM_lt,
df_th    = MNM_th,
standort = "MN",
logger   = "M"
)
#Meusebach nass Ost
MNO <- join_loggers(
df_lt    = MNO_lt,
df_th    = MNO_th,
standort = "MN",
logger   = "O"
)
#Meusebach nass West
MNW <- join_loggers(
df_lt    = MNW_lt,
df_th    = MNW_th,
standort = "MN",
logger   = "W"
)
#Meusebach nass Nord
MNN <- join_loggers(
df_lt    = MNN_lt,
df_th    = MNN_th,
standort = "MN",
logger   = "N"
)
#Meusebach nass Süd
MNS <- join_loggers(
df_lt    = MNS_lt,
df_th    = MNS_th,
standort = "MN",
logger   = "S"
)
# alle Daten nach dem 30.9.2025 23:50 Uhr entfernen
cutoff <- as.POSIXct("2025-09-30 23:50:00", tz="UTC")
logger_names <- c("LM", "LO", "LW", "LN", "LS", "MTM", "MTO", "MTW", "MTN", "MTS", "MNM", "MNO", "MNW", "MNN", "MNS")
for (logger in logger_names) {
assign(logger, get(logger) %>%
filter(DateTime <= cutoff))
}
#entfernen von Zeilen ohne Messwerte (entstanden durch Auslesen der Logger)
messwert_spalten <- c("Temp_sonne_C", "Licht_lux", "Temp_schatten_C", "relLF_percent", "Taupunkt_C")
for (logger in logger_names) {
# Tabelle holen, filtern, wieder zurückschreiben
assign(logger, get(logger) %>%
filter(!if_all(all_of(messwert_spalten), is.na)))
}
#Zusammenführen als Masterdatensatz
all_loggers <- bind_rows(lapply(logger_names, get))
str(all_loggers)
#Berechnung der Tagesmitteltemperatur pro Logger in einer separaten Tabelle
# genutzte Packages
#library(dplyr)
#library(lubridate)
# Datum ohne Uhrzeit erzeugen, Mittelwerte gruppiert nach Loggerstandort und Tag erzeugen
daily_logger_means <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
# Fläche und Logger vom ersten Eintrag des Tages übernehmen
Standort = first(Standort),
Logger = first(Logger),
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
.groups = "drop"
) %>%
select(Logger_ID, Standort, Logger, Datum, everything())
summary(daily_logger_means)
View(daily_logger_means)
#Minimum & Maximum der Temperaturmittelwerte für die einzelnen Logger
daily_logger_means_min_max <- daily_logger_means %>%
group_by(Logger_ID) %>%
summarise(
# Sonne
Sonne_max_mean = max(Temp_sonne_mean, na.rm = TRUE),
Sonne_max_mean_Tag = Datum[which.max(Temp_sonne_mean)],
Sonne_min_mean = min(Temp_sonne_mean, na.rm = TRUE),
Sonne_min_mean_Tag = Datum[which.min(Temp_sonne_mean)],
# Schatten
Schatten_max_mean = max(Temp_schatten_mean, na.rm = TRUE),
Schatten_max_mean_Tag = Datum[which.max(Temp_schatten_mean)],
Schatten_min_mean = min(Temp_schatten_mean, na.rm = TRUE),
Schatten_min_mean_Tag = Datum[which.min(Temp_schatten_mean)]
)
View(daily_logger_means_min_max)
daily_logger_means <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
Temp_sonne_max = ifelse(
all(is.na(Temp_sonne_C)), NA,
max(Temp_sonne_C, na.rm = TRUE)
),
Temp_sonne_min = ifelse(
all(is.na(Temp_sonne_C)), NA,
min(Temp_sonne_C, na.rm = TRUE)
),
Temp_schatten_max = ifelse(
all(is.na(Temp_schatten_C)), NA,
max(Temp_schatten_C, na.rm = TRUE)
),
Temp_schatten_min = ifelse(
all(is.na(Temp_schatten_C)), NA,
min(Temp_schatten_C, na.rm = TRUE)
),
Messungen = n(),
.groups = "drop"
)
#Berechnung der Tagesmitteltemperatur pro Logger in einer separaten Tabelle
# genutzte Packages
#library(dplyr)
#library(lubridate)
# Datum ohne Uhrzeit erzeugen, Mittelwerte gruppiert nach Loggerstandort und Tag erzeugen
daily_logger_means <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
# Fläche und Logger vom ersten Eintrag des Tages übernehmen
Standort = first(Standort),
Logger = first(Logger),
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
.groups = "drop"
) %>%
select(Logger_ID, Standort, Logger, Datum, everything())
summary(daily_logger_means)
daily_logger_summary <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
Temp_sonne_max = ifelse(
all(is.na(Temp_sonne_C)), NA,
max(Temp_sonne_C, na.rm = TRUE)
),
Temp_sonne_min = ifelse(
all(is.na(Temp_sonne_C)), NA,
min(Temp_sonne_C, na.rm = TRUE)
),
Temp_schatten_max = ifelse(
all(is.na(Temp_schatten_C)), NA,
max(Temp_schatten_C, na.rm = TRUE)
),
Temp_schatten_min = ifelse(
all(is.na(Temp_schatten_C)), NA,
min(Temp_schatten_C, na.rm = TRUE)
),
Messungen = n(),
.groups = "drop"
)
View(daily_logger_summary)
#Separate Tabelle um anzeigen zu lassen, zu welcher Uhrzeit die Min & Max Werte gemessen wurden
daily_logger_extrema_days <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
## ===== SONNE =====
Temp_sonne_max =
if (all(is.na(Temp_sonne_C))) NA_real_
else max(Temp_sonne_C, na.rm = TRUE),
Time_sonne_max =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_sonne_C)],
Temp_sonne_min =
if (all(is.na(Temp_sonne_C))) NA_real_
else min(Temp_sonne_C, na.rm = TRUE),
Time_sonne_min =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_sonne_C)],
## ===== SCHATTEN =====
Temp_schatten_max =
if (all(is.na(Temp_schatten_C))) NA_real_
else max(Temp_schatten_C, na.rm = TRUE),
Time_schatten_max =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_schatten_C)],
Temp_schatten_min =
if (all(is.na(Temp_schatten_C))) NA_real_
else min(Temp_schatten_C, na.rm = TRUE),
Time_schatten_min =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_schatten_C)],
.groups = "drop"
)
View(daily_logger_extrema_days)
#Auswertung
extrema_logger <- daily_logger_extrema %>%
group_by(Logger_ID) %>%
summarise(
# Sonne
Sonne_max = max(Temp_sonne_max, na.rm = TRUE),
Sonne_max_Zeit = Time_sonne_max[which.max(Temp_sonne_max)],
Sonne_min = min(Temp_sonne_min, na.rm = TRUE),
Sonne_min_Zeit = Time_sonne_min[which.min(Temp_sonne_min)],
# Schatten
Schatten_max = max(Temp_schatten_max, na.rm = TRUE),
Schatten_max_Zeit = Time_schatten_max[which.max(Temp_schatten_max)],
Schatten_min = min(Temp_schatten_min, na.rm = TRUE),
Schatten_min_Zeit = Time_schatten_min[which.min(Temp_schatten_min)]
)
#Auswertung
extrema_logger <- daily_logger_extrema_days %>%
group_by(Logger_ID) %>%
summarise(
# Sonne
Sonne_max = max(Temp_sonne_max, na.rm = TRUE),
Sonne_max_Zeit = Time_sonne_max[which.max(Temp_sonne_max)],
Sonne_min = min(Temp_sonne_min, na.rm = TRUE),
Sonne_min_Zeit = Time_sonne_min[which.min(Temp_sonne_min)],
# Schatten
Schatten_max = max(Temp_schatten_max, na.rm = TRUE),
Schatten_max_Zeit = Time_schatten_max[which.max(Temp_schatten_max)],
Schatten_min = min(Temp_schatten_min, na.rm = TRUE),
Schatten_min_Zeit = Time_schatten_min[which.min(Temp_schatten_min)]
)
View(extrema_logger)
# Mittelwerte gruppiert nach Loggerstandort und Tag erzeugen, zusätzlich Min & Max Temperatur am Tag
daily_logger_summary <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
Temp_sonne_max = ifelse(
all(is.na(Temp_sonne_C)), NA,
max(Temp_sonne_C, na.rm = TRUE)
),
Temp_sonne_min = ifelse(
all(is.na(Temp_sonne_C)), NA,
min(Temp_sonne_C, na.rm = TRUE)
),
Temp_schatten_max = ifelse(
all(is.na(Temp_schatten_C)), NA,
max(Temp_schatten_C, na.rm = TRUE)
),
Temp_schatten_min = ifelse(
all(is.na(Temp_schatten_C)), NA,
min(Temp_schatten_C, na.rm = TRUE)
),
.groups = "drop"
)
#Separate Tabelle um anzeigen zu lassen, zu welcher Uhrzeit die Min & Max Werte gemessen wurden
daily_logger_extrema_days <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
## ===== SONNE =====
Temp_sonne_max =
if (all(is.na(Temp_sonne_C))) NA_real_
else max(Temp_sonne_C, na.rm = TRUE),
Time_sonne_max =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_sonne_C)],
Temp_sonne_min =
if (all(is.na(Temp_sonne_C))) NA_real_
else min(Temp_sonne_C, na.rm = TRUE),
Time_sonne_min =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_sonne_C)],
## ===== SCHATTEN =====
Temp_schatten_max =
if (all(is.na(Temp_schatten_C))) NA_real_
else max(Temp_schatten_C, na.rm = TRUE),
Time_schatten_max =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_schatten_C)],
Temp_schatten_min =
if (all(is.na(Temp_schatten_C))) NA_real_
else min(Temp_schatten_C, na.rm = TRUE),
Time_schatten_min =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_schatten_C)],
.groups = "drop"
)
#Auswertung
extrema_logger <- daily_logger_extrema_days %>%
group_by(Logger_ID) %>%
summarise(
# Sonne
Sonne_max = max(Temp_sonne_max, na.rm = TRUE),
Sonne_max_Zeit = Time_sonne_max[which.max(Temp_sonne_max)],
Sonne_min = min(Temp_sonne_min, na.rm = TRUE),
Sonne_min_Zeit = Time_sonne_min[which.min(Temp_sonne_min)],
# Schatten
Schatten_max = max(Temp_schatten_max, na.rm = TRUE),
Schatten_max_Zeit = Time_schatten_max[which.max(Temp_schatten_max)],
Schatten_min = min(Temp_schatten_min, na.rm = TRUE),
Schatten_min_Zeit = Time_schatten_min[which.min(Temp_schatten_min)]
)
# Mittelwerte gruppiert nach Loggerstandort und Tag erzeugen, zusätzlich Min & Max Temperatur am Tag
daily_logger_summary <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
Temp_sonne_mean = mean(Temp_sonne_C, na.rm = TRUE),
Temp_schatten_mean = mean(Temp_schatten_C, na.rm = TRUE),
Temp_sonne_max = ifelse(
all(is.na(Temp_sonne_C)), NA,
max(Temp_sonne_C, na.rm = TRUE)
),
Temp_sonne_min = ifelse(
all(is.na(Temp_sonne_C)), NA,
min(Temp_sonne_C, na.rm = TRUE)
),
Temp_schatten_max = ifelse(
all(is.na(Temp_schatten_C)), NA,
max(Temp_schatten_C, na.rm = TRUE)
),
Temp_schatten_min = ifelse(
all(is.na(Temp_schatten_C)), NA,
min(Temp_schatten_C, na.rm = TRUE)
),
.groups = "drop"
)
#Separate Tabelle um anzeigen zu lassen, zu welcher Uhrzeit die Min & Max Werte gemessen wurden
daily_logger_extrema <- all_loggers %>%
mutate(Datum = as.Date(DateTime)) %>%
group_by(Logger_ID, Datum) %>%
summarise(
## ===== SONNE =====
Temp_sonne_max =
if (all(is.na(Temp_sonne_C))) NA_real_
else max(Temp_sonne_C, na.rm = TRUE),
Time_sonne_max =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_sonne_C)],
Temp_sonne_min =
if (all(is.na(Temp_sonne_C))) NA_real_
else min(Temp_sonne_C, na.rm = TRUE),
Time_sonne_min =
if (all(is.na(Temp_sonne_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_sonne_C)],
## ===== SCHATTEN =====
Temp_schatten_max =
if (all(is.na(Temp_schatten_C))) NA_real_
else max(Temp_schatten_C, na.rm = TRUE),
Time_schatten_max =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.max(Temp_schatten_C)],
Temp_schatten_min =
if (all(is.na(Temp_schatten_C))) NA_real_
else min(Temp_schatten_C, na.rm = TRUE),
Time_schatten_min =
if (all(is.na(Temp_schatten_C))) as.POSIXct(NA)
else DateTime[which.min(Temp_schatten_C)],
.groups = "drop"
)
#Auswertung
extrema_logger <- daily_logger_extrema %>%
group_by(Logger_ID) %>%
summarise(
# Sonne
Sonne_max = max(Temp_sonne_max, na.rm = TRUE),
Sonne_max_Zeit = Time_sonne_max[which.max(Temp_sonne_max)],
Sonne_min = min(Temp_sonne_min, na.rm = TRUE),
Sonne_min_Zeit = Time_sonne_min[which.min(Temp_sonne_min)],
# Schatten
Schatten_max = max(Temp_schatten_max, na.rm = TRUE),
Schatten_max_Zeit = Time_schatten_max[which.max(Temp_schatten_max)],
Schatten_min = min(Temp_schatten_min, na.rm = TRUE),
Schatten_min_Zeit = Time_schatten_min[which.min(Temp_schatten_min)]
)
#Boxplots - Vergleich der Logger der einzelnen Flächen (nur der äußere Logger oder der innere)
library(ggplot2)
library(tidyr)
# Filter für Standort L und die gewünschten Logger
df_plot <- daily_logger_means %>%
filter(Standort == "L", Logger %in% c("M", "N", "O", "S", "W"))
# Boxplot erstellen
ggplot(df_plot, aes(x = Logger, y = Temp_sonne_mean, fill = Logger)) +
geom_boxplot() +
labs(
title = "Vergleich der Tagesmittelwerte des äußeren Sensors pro Logger - Lichtenau",
x = "Loggerstandort",
y = "Tagesmitteltemperatur (°C)"
) +
theme_minimal() +
theme(legend.position = "none")
# Filter für die gewünschten Logger und Standorte
df_plot <- daily_logger_means %>%
filter(Standort %in% c("L", "MN", "MT"),
Logger %in% c("M", "N", "O", "S", "W"))
# Boxplot mit Facets für jeden Standort
ggplot(df_plot, aes(x = Logger, y = Temp_sonne_mean, fill = Logger)) +
geom_boxplot() +
labs(
title = "Vergleich der Tagesmittelwerte des äußeren Sensors pro Logger",
x = "Loggerstandort",
y = "Tagesmitteltemperatur (°C)"
) +
theme_minimal() +
theme(legend.position = "none") +
facet_wrap(~Standort, nrow = 1)  # ein Plot pro Standort nebeneinander
ggplot(df_plot, aes(x = Logger, y = Temp_sonne_mean, fill = Logger)) +
geom_boxplot() +
labs(
title = "Vergleich der Tagesmittelwerte des äußeren Sensors pro Logger",
x = "Loggerstandort",
y = "Tagesmitteltemperatur (°C)"
) +
theme_minimal() +
theme(legend.position = "none") +
facet_grid(Standort ~ .)  # Facets übereinander
ggplot(df_plot, aes(x = Logger, y = Temp_sonne_mean, fill = Logger)) +
geom_boxplot() +
labs(
title = "Vergleich der Tagesmittelwerte des äußeren Sensors pro Logger",
x = "Loggerstandort",
y = "Tagesmitteltemperatur (°C)"
) +
theme_minimal() +
theme(legend.position = "none") +
facet_wrap(~Standort, ncol = 1, scales = "free_y")  # jede Facet kann eigene y-Skala haben
ggsave("boxplot_loggers.png", width = 6, height = 10)  # Höhe größer
ggsave("boxplot_loggers.png", width = 6, height = 15)  # Höhe größer
ggsave("boxplot_loggers.png", width = 6, height = 20)  # Höhe größer
title: "Datenanalyse_Logger"
